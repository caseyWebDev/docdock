/*!
caseyWebDev (requires jQuery)
Casey Foster
caseyWebDev
caseywebdev.com
*/
(function(){var $,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item){return i}}return -1};if(typeof caseyWebDev==="undefined"||caseyWebDev===null){$=jQuery;window.caseyWebDev=(function(){function _Class(){}_Class.init=function(){var k,v,_this=this;for(k in this){v=this[k];if(v!=null){if(typeof v.init==="function"){v.init()}}}return $(function(){return _this.load()})};_Class.load=function(){var k,v,_this=this;for(k in this){v=this[k];if(v!=null){if(typeof v.load==="function"){v.load()}}}this.dom();return $("body").on("DOMSubtreeModified",function(){return _this.dom()})};_Class.dom=function(){var k,v,_results;_results=[];for(k in this){v=this[k];_results.push(v!=null?typeof v.dom==="function"?v.dom():void 0:void 0)}return _results};_Class.abortXhr=function(){var k,v,_results;_results=[];for(k in this){v=this[k];_results.push(v!=null?typeof v.abortXhr==="function"?v.abortXhr():void 0:void 0)}return _results};_Class.Util=(function(){function _Class(){}_Class.init=function(){$.prettyUrl=function(s,delimiter){if(delimiter==null){delimiter="-"}return $.trim(s.toLowerCase().replace(/[\W_]/g," ").replace(/\s+/g," ")).replace(/\s+/g,delimiter)};$.escapeHtml=function(s,quotes,query){s=$("<div/>").text(s).html();if(quotes){s=s.replace(/"/g,"&quot;").replace(/'/g,"&#039;")}if(query){s=s.replace(" ","+")}return s};$.unescapeHtml=function(s){return $("<div/>").html(s).text()};$.sortByKey=function(o){var copy,k,v,_i,_len;if(typeof o!=="object"){return o}copy=[];for(k in o){v=o[k];copy.push({k:k,v:v})}o={};copy.sort(function(a,b){if(a.k<b.k){return -1}else{return 1}});for(_i=0,_len=copy.length;_i<_len;_i++){v=copy[_i];o[v.k]=v.v}return o};$.sortWithKey=function(o,fn){var copy,k,v,_i,_len;if(typeof o!=="object"){return o}copy=[];for(k in o){v=o[k];copy.push({k:k,v:v})}o={};copy.sort(fn);for(_i=0,_len=copy.length;_i<_len;_i++){v=copy[_i];o[v.k]=v.v}return o};return $.scrollTo=$.fn.scrollTo=function(tar,duration,callback){var val;if(tar==null){tar=0}if(tar instanceof jQuery){val=tar.offset().top}else{if(!isNaN(parseInt(tar))){val=tar}else{val=$(tar).offset().top}}return $(this instanceof jQuery?this:$.browser.webkit?document.body:document.documentElement).animate({scrollTop:val},duration,callback)}};return _Class})();_Class.Placeholder=(function(){function _Class(){}_Class.locked=false;_Class.load=function(){$.fn._val=$.fn.val;return $.fn.val=function(str){if(str==null){if($(this).data("empty")){return""}else{return $(this)._val()}}else{return $(this).each(function(){return $(this)._val(str)})}}};_Class.dom=function(){if(!this.locked){this.locked=true;$("input[data-placeholder], textarea[data-placeholder]").each(function(){var $t,password,placeholder;$t=$(this);password=$t.data("password")!=null;placeholder=$t.data("placeholder");if(placeholder&&!($t.data("empty")!=null)){if(password){$t[0].type="password"}if(!(password&&$.browser.msie&&$.browser.version.split(".")[0]<9)){if(!$t.val()||$t.val()===placeholder){$t.data("empty",true);$t.val(placeholder);if(password){$t[0].type=""}}else{$t.data("empty",false)}$t.attr({placeholder:placeholder,title:placeholder});return $t.focus(function(){if($t.data("empty")){$t.val("")}if(password){$t[0].type="password";$t.attr("placeholder",placeholder)}return $t.data("empty",false)}).blur(function(){if($t.val()){return $t.data("empty",false)}else{$t.val(placeholder);$t.data("empty",true);if(password){return $t[0].type=""}}})}}});return this.locked=false}};return _Class})();_Class.PopUp=(function(){function _Class(){}_Class.load=function(){var _this=this;if(!$("#caseyWebDevPopUp").length){this.$table=$('<table id="caseyWebDevPopUp"><tbody><tr><td><div/></td></tr></tbody></table>').css("opacity",0);this.hide();$("body").append(this.$table);this.$td=this.$table.find("td");this.$div=this.$td.find("div");$(window).on("scroll resize orientationchange",function(){return _this.correctUi()});this.$td.on("click",function(){return _this.$div.find(".click").click()});this.$div.on("click",false);this.$div.on("click",".hide-on-click",function(){return _this.hide()});$(document).keydown(function(e){if(_this.$table.css("display")==="block"&&!$("body :focus").length){if(e.keyCode===13&&_this.$div.find(".enter").length){_this.$div.find(".enter").click()}else{if(e.keyCode===27&&_this.$div.find(".esc").length){_this.$div.find(".esc").click()}else{return true}}return false}});return this.correctUi()}};_Class.correctUi=function(){return this.$td.width($(window).width()).height($(window).height())};_Class.hide=function(){var _this=this;return this.$table.stop().animate({opacity:0},250,function(){return _this.$table.css("display","none")})};_Class.show=function(html,duration,callback){var _this=this;$("body :focus").blur();this.$div.html(html);this.$table.stop().css("display","block").animate({opacity:1},250);if(this.timer!=null){clearTimeout(this.timer)}if(duration){return this.timer=setTimeout(function(){_this.hide();return typeof callback==="function"?callback():void 0},duration)}};return _Class})();_Class.LiveSearch=(function(){function _Class(){}_Class.load=function(){return $("input, textarea").attr({autocomplete:"off"})};_Class.trim=function(s){return $.trim(s.replace(/\s+/g," "))};_Class.dom=function(){var _this=this;return $("*[data-live-search-callback]").each(function(i,e){var $q,$results,$wrap;$wrap=$(e);if($wrap.data("liveSearchCache")==null){$wrap.data({liveSearchCache:[],liveSearchId:0,liveSearchAjax:{},liveSearchLastQ:null,liveSearchPage:0,liveSearchHoldHover:false});$q=$wrap.find(".q");$results=$wrap.find(".results");if($q.is(":focus")){_this.query($wrap)}$wrap.hover(function(){return $wrap.data({hover:true})},function(){$wrap.data({hover:false});if(!($q.is(":focus")||$wrap.data("liveSearchHoldHover"))){return $results.css({display:"none"})}}).mouseover(function(){return $wrap.data({liveSearchHoldHover:false})});$q.blur(function(){return setTimeout(function(){if(!$wrap.data("hover")){return $results.css({display:"none"})}},0)}).focus(function(){return $wrap.data({liveSearchHoldHover:false})}).keydown(function(e){switch(e.keyCode){case 13:$wrap.find(".selected").click();break;case 38:_this.select($wrap,"prev");break;case 40:_this.select($wrap,"next");break;case 27:setTimeout(function(){return $results.css({display:"none"})},0);$q.blur();break;default:setTimeout(function(){if($q.is(":focus")){return _this.query($wrap)}},0);return true}return false}).on("focus keyup change",function(){return _this.query($wrap)});return $results.on("mouseenter",".result",function(){$results.find(".result.selected").removeClass("selected");return $(this).addClass("selected")}).on("click",".result",function(e){var $t;$t=$(e.currentTarget);$results.find(".result.selected").removeClass("selected");$t.addClass("selected");if($t.hasClass("prev")){_this.page($wrap,$wrap.data("liveSearchPage")-1,true);$wrap.data("liveSearchHoldHover",true)}else{if($t.hasClass("next")){_this.page($wrap,$wrap.data("liveSearchPage")+1);$wrap.data("liveSearchHoldHover",true)}else{if($t.hasClass("submit")){$t.parents("form").submit()}}}if($t.hasClass("hide")){$("#search .q").blur();return $("#search .results").css("display","none")}})}})};_Class.page=function($wraps,n,prev){return $wraps.each(function(){var $results,$wrap;$wrap=$(this);$results=$wrap.find(".results");n=Math.min($results.find(".page").length-1,Math.max(n,0));$results.find(".result.selected").removeClass("selected");$results.find(".page").css("display","none").eq(n).removeAttr("style").find(".result:not(.prev):not(.next)")[prev?"last":"first"]().addClass("selected");return $wrap.data("liveSearchPage",n)})};_Class.query=function($wraps,urlN){var _this=this;if(urlN==null){urlN=1}return $wraps.each(function(i,e){var $results,$wrap,callback,empty,q,t,_base,_ref;$wrap=$(e);$results=$wrap.find(".results");callback=eval($wrap.data("liveSearchCallback"));q=_this.trim($wrap.find(".q").val());t=new Date().getTime();$results.css("display","block");empty="liveSearchEmpty" in $wrap.data();if(!(q||empty)){$results.css("display","none").html("");$wrap.removeClass("loading")}else{if(q!==$wrap.data("liveSearchLastQ")||urlN>1){callback($wrap);clearTimeout($wrap.data("liveSearchTimeout"));if(typeof(_base=$wrap.data("liveSearchAjax")).abort==="function"){_base.abort()}if($wrap.data("liveSearchCache")[("liveSearchCache_"+urlN+"_")+q]!=null){callback($wrap,$wrap.data("liveSearchCache")[("liveSearchCache_"+urlN+"_")+q],urlN);$wrap.removeClass("loading");if($wrap.data("liveSearchUrl"+(urlN+1))!=null){_this.query($wrap,urlN+1)}}else{$wrap.addClass("loading").data("liveSearchTimeout",setTimeout(function(){var check,handleData;check=$wrap.data("liveSearchId",$wrap.data("liveSearchId")+1).data("liveSearchId");handleData=function(data){$wrap.data("liveSearchCache")[("liveSearchCache_"+urlN+"_")+q]=data;if(check===$wrap.data("liveSearchId")&&(_this.trim($wrap.find(".q").val())||empty)){$wrap.removeClass("loading");callback($wrap,data,urlN)}if($wrap.data("liveSearchUrl"+(urlN+1))){return _this.query($wrap,urlN+1)}};if($wrap.data("liveSearchJs")!=null){return handleData(eval($wrap.data("liveSearchJs"))(q))}else{if($wrap.data("liveSearchUrl")!=null){return $wrap.data({liveSearchAjax:$.getJSON($wrap.data("liveSearchUrl"+(urlN===1?"":urlN)),{q:q},handleData)})}}},(_ref=$wrap.data("liveSearchDelay"))!=null?_ref:0))}}}return $wrap.data("liveSearchLastQ",q)})};_Class.select=function($wraps,dir){var _this=this;return $wraps.each(function(i,e){var $page,$wrap;$wrap=$(e);$page=$wrap.find(".page").eq($wrap.data("liveSearchPage"));if(!$page.find(".result.selected").removeClass("selected")[dir]().addClass("selected").length){$page.find(".result")[dir==="prev"?"first":"last"]().addClass("selected")}if($page.find(".result.selected").hasClass("prev")){return _this.page($wrap,$wrap.data("liveSearchPage")-1,true)}else{if($page.find(".result.selected").hasClass("next")){return _this.page($wrap,$wrap.data("liveSearchPage")+1)}}})};return _Class})();_Class.Tooltip=(function(){function _Class(){}_Class.load=function(){return $("body").on("mouseenter focus","*[data-tooltip-text]",function(e){var $t,dir,hH,hW,pos,tL,tT,_ref,_ref2;$t=$(this);if(!$t.data("hover"||$t.data("focus"))){if($t.data("tooltipDiv")==null){$t.data("tooltipDiv",$('<div class="caseyWebDevTooltip"/>'));$t.parent().append($t.data("tooltipDiv"))}pos=(_ref=$t.data("tooltipPosition"))!=null?_ref:"top";$t.data("tooltipDiv").html(""+($t.data("tooltipText"))+'<div class="caseyWebDevTooltipArrow '+pos+'"></div>');tL=$t.position().left+parseInt($t.css("marginLeft"));tT=$t.position().top+parseInt($t.css("marginTop"));hW=($t.outerWidth()-$t.data("tooltipDiv").outerWidth())/2;hH=($t.outerHeight()-$t.data("tooltipDiv").outerHeight())/2;dir={top:{left:hW,top:-$t.data("tooltipDiv").outerHeight()-15,dLeft:0,dTop:10},right:{left:$t.outerWidth()+15,top:hH,dLeft:-10,dTop:0},bottom:{left:hW,top:$t.outerHeight()+15,dLeft:0,dTop:-10},left:{left:-$t.data("tooltipDiv").outerWidth()-15,top:hH,dLeft:10,dTop:0}};$t.data("tooltipDiv").css({left:tL+dir[pos].left,top:tT+dir[pos].top,opacity:0,display:"block"}).stop().animate({left:"+="+dir[pos].dLeft,top:"+="+dir[pos].dTop,opacity:1},(_ref2=$t.data("tooltipSpeed"))!=null?_ref2:200);$t.on("mouseleave blur",function(e){var _ref3;$t.data((e.type==="mouseleave"?"hover":"focus"),false);if(!$t.data("hover"||$t.data("focus"))){return $t.data("tooltipDiv").stop().animate({left:"+="+(-dir[pos].dLeft),top:"+="+(-dir[pos].dTop),opacity:0},(_ref3=$t.data("tooltipSpeed"))!=null?_ref3:200,function(){return $(this).css("display","none")}).off(e)}})}return $t.data((e.type==="mouseenter"?"hover":"focus"),true)})};return _Class})();_Class.State=(function(){function _Class(){}_Class.xhr={};_Class.cache={};_Class.refresh=false;_Class.query="pushState";_Class.prefix="<!--pushState-->\n";_Class.init=function(){var _this=this;if(history.state!=null){history.replaceState(true,null)}return $(window).on("popstate",function(e){if(e.originalEvent.state!=null){return _this.push(location.href)}else{return history.replaceState(true,null)}}).on("click","*[data-push-state]",function(e){var $t;$t=$(e.currentTarget);_this.push($t.data("pushState")?$t.data("pushState"):$t.attr("href"));return false})};_Class.updateCache=function(url,o){if(this.cache[url]!=null){return $.extend(this.cache[url],o)}else{return this.cache[url]=o}};_Class.fullUrl=function(url){if(url.match(/^\w+:/)){return url}else{return location.protocol+"//"+location.host+url}};_Class.push=function(url){var _base,_this=this;url=this.fullUrl(url);if(location.protocol===url.match(/^\w+:/)[0]&&(history.pushState!=null)&&!this.refresh){if(typeof(_base=this.xhr).abort==="function"){_base.abort()}this.clear(url);if((this.cache[url]!=null)&&this.cache[url].cache!==false){return this.change(url)}else{this.before(url);return this.xhr=$.get(""+url+(__indexOf.call(url,"?")>=0?"&":"?")+this.query,null,function(data){if(data.slice(0,_this.prefix.length)===_this.prefix){_this.updateCache(url,{title:/^[^\n]*\n([^\n]*)\n/.exec(data)[1],html:/^(?:[^\n]*\n){2}([\s\S]*)$/.exec(data)[1]});_this.after(url);return _this.change(url)}else{return location.assign(url)}}).error(function(){return location.assign(url)})}}else{return location.assign(url)}};_Class.change=function(url){if(location.href!==url){history.pushState(true,null,url)}return this.parse(url)};_Class.clear=function(url){};_Class.before=function(url){};_Class.after=function(url){};_Class.parse=function(url){};return _Class})();_Class.LazyLoad=(function(){function _Class(){}_Class.tolerance=100;_Class.load=function(){var _this=this;this.update();return $(window).on("scroll resize",function(){return _this.update()})};_Class.update=function(){var _this=this;return $("img[data-lazy]").each(function(i,e){var $t,url;$t=$(e);if($t.css("display")!=="none"&&$(window).scrollTop()+$(window).outerHeight()>=$t.offset().top-_this.tolerance){url=$t.data("lazy");return $t.removeAttr("data-lazy").attr("src",url)}})};return _Class})();_Class.Konami=function(callback,onlyOnce,code,swipeCode){var checkEvents,dX,dY,keyDownEvent,keysPressed,startX,startY,tap,touchEndEvent,touchEvents,touchMoveEvent,touchStartEvent;if(onlyOnce==null){onlyOnce=false}if(code==null){code="38,38,40,40,37,39,37,39,66,65,13"}if(swipeCode==null){swipeCode="up,up,down,down,left,right,left,right,tap,tap,tap"}keysPressed=[];touchEvents=[];tap=false;startX=startY=dX=dY=0;keyDownEvent=function(e){keysPressed.push(e.keyCode);if(keysPressed.toString().slice(-code.length)===code){if(onlyOnce){$(document).off("keydown",keyDownEvent)}keysPressed=[];e.preventDefault();return callback()}};touchStartEvent=function(e){var touch,tracking;e=e.originalEvent;if(e.touches.length===1){touch=e.touches[0];startX=touch.screenX,startY=touch.screenY;return tap=tracking=true}};touchMoveEvent=function(e){var downUp,rightLeft,touch,val;e=e.originalEvent;if(e.touches.length===1&&tap){touch=e.touches[0];dX=touch.screenX-startX;dY=touch.screenY-startY;rightLeft=dX>0?"right":"left";downUp=dY>0?"down":"up";val=Math.abs(dX)>Math.abs(dY)?rightLeft:downUp;touchEvents.push(val);tap=false;return checkEvents(e)}};touchEndEvent=function(e){e=e.originalEvent;if(e.touches.length===0&&tap){touchEvents.push("tap");return checkEvents(e)}};checkEvents=function(e){if(touchEvents.toString().slice(-swipeCode.length)===swipeCode){if(onlyOnce){$(document).off("touchmove",touchMoveEvent);$(document).off("touchend",touchEndEvent)}touchEvents=[];e.preventDefault();return callback()}};$(document).on("keydown",keyDownEvent);$(document).on("touchstart",touchStartEvent);$(document).on("touchmove",touchMoveEvent);return $(document).on("touchend",touchEndEvent)};_Class.Cookie=function(name,value,options){var cookie,cookies,n,params,v,_i,_len,_ref,_ref2,_results;if(options==null){options={}}if(typeof name==="object"){_results=[];for(n in name){v=name[n];_results.push(_Class.Cookie(n,v,value))}return _results}else{if(typeof name==="string"&&value!==void 0){if(value===null){options.expires=-1}value||(value="");params=[];if(options.expires){params.push("; Expires="+(options.expires.toGMTString!=null?options.expires.toGMTString():new Date(new Date().getTime()+options.expires*1000*60*60*24).toGMTString()))}if(options.path){params.push("; Path="+options.path)}if(options.domain){params.push("; Domain="+options.domain)}if(options.secure){params.push("; Secure")}if(options.httpOnly){params.push("; HttpOnly")}return document.cookie=""+(encodeURIComponent(name))+"="+(encodeURIComponent(value))+(params.join(""))}else{cookies={};_ref=decodeURIComponent(document.cookie).split(/\s*;\s*/);for(_i=0,_len=_ref.length;_i<_len;_i++){cookie=_ref[_i];_ref2=/^([^=]*)\s*=\s*(.*)$/.exec(cookie),n=_ref2[1],v=_ref2[2];if(typeof name==="string"&&name===n){return v}else{if(!(name!=null)){cookies[n]=v}}}if(!name){return cookies}else{return null}}}};return _Class}).call(this)}}).call(this);